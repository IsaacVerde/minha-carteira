<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Editar Transação: <%= transacao.nome %></title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <link rel="stylesheet" href="/css/styles.css"> 
</head>

<body class="bg-light">

    <div class="container mt-5">
        <div class="card shadow-lg mx-auto" style="max-width: 800px;">
            <div class="card-header bg-white border-bottom-0 pt-4 pb-0">
                <h1 class="h3 card-title text-center text-primary fw-bold">Editar Transação</h1>
                <h2 class="h5 text-center text-muted">Ajustando: <%= transacao.nome %></h2>
            </div>
            
            <div class="card-body p-4 p-md-5">

                <form action="/transactions/edit" method="POST" class="row g-3">
                    
                    <input type="hidden" name="id" value="<%= transacao.id %>">
                    <input type="hidden" name="current_filter" value="<%= currentFilter %>">

                    <div class="col-12">
                        <label for="nome" class="form-label fw-bold">Nome/Descrição:</label>
                        <input type="text" id="nome" name="nome" value="<%= transacao.nome %>" required class="form-control">
                    </div>

                    <div class="col-md-6">
                        <label for="valor" class="form-label fw-bold">Valor (R$):</label>
                        <input type="number" id="valor" name="valor" step="0.01" value="<%= transacao.valor %>" required class="form-control">
                    </div>

                    <div class="col-md-6">
                        <label for="data_transacao" class="form-label fw-bold">Data:</label>
                        <input type="date" id="data_transacao" name="data_transacao" value="<%= transacao.data_bd %>" required class="form-control">
                    </div>

                    <div class="col-md-4">
                        <label for="tipo" class="form-label fw-bold">Tipo:</label>
                        <select id="tipo" name="tipo" class="form-select" required>
                            <option value="Receita" <%= transacao.tipo === 'Receita' ? 'selected' : '' %>>Receita</option>
                            <option value="Despesa" <%= transacao.tipo === 'Despesa' ? 'selected' : '' %>>Despesa</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label for="categoria" class="form-label fw-bold">Categoria:</label>
                        <select id="categoria" name="categoria" class="form-select" required>
                            <% categorias.forEach(cat => { %>
                                <option value="<%= cat %>" <%= transacao.categoria === cat ? 'selected' : '' %>><%= cat %></option>
                            <% }); %>
                        </select>
                    </div>
                    
                    <div class="col-md-4">
                        <label for="status" class="form-label fw-bold">Status:</label>
                        <select id="status" name="status" class="form-select" required>
                            <% statusList.forEach(stat => { %>
                                <option value="<%= stat %>" <%= transacao.status === stat ? 'selected' : '' %>><%= stat %></option>
                            <% }); %>
                        </select>
                    </div>

                    <div class="col-12">
                        <label for="metodo_pagamento" class="form-label fw-bold">Método de Pagamento:</label>
                        <select id="metodo_pagamento" name="metodo_pagamento" class="form-select" required>
                            <% metodosPagamento.forEach(metodo => { %>
                                <option value="<%= metodo %>" <%= transacao.metodo_pagamento === metodo ? 'selected' : '' %>><%= metodo %></option>
                            <% }); %>
                        </select>
                    </div>

                    <div class="col-12 mt-4 form-actions d-flex justify-content-between">
                        <button type="submit" class="btn btn-primary btn-lg flex-grow-1 me-2">Salvar Edição</button>
                        
                        <a href="/dashboard?period_filter=<%= currentFilter %>" class="btn btn-secondary btn-lg flex-grow-1 ms-2">Cancelar</a>
                    </div>

                </form>
            </div>
        </div>
        </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>